---
- name: Test launching a job template from a URI call
  hosts: all

  tasks:
    - name: Launch the job
      ansible.builtin.uri:
        url: "https://{{ base_url }}/api/v2/job_templates/{{ template_id }}/launch/"
        method: POST
        url_username: "{{ aap_user }}"
        url_password: "{{ aap_password }}"
        force_basic_auth: true
        status_code:
          - 200
          - 201
      register: launch_results

    - name: Debug the results
      ansible.builtin.debug:
        var: launch_results
