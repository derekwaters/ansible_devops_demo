---
- name: Test launching a job template from a URI call
  hosts: all

  tasks:
    - name: Debug stuff
      ansible.builtin.debug:
        var: ansible_user
        var: ansible_password

    - name: Launch the job
      ansible.builtin.uri:
        url: "https://{{ base_url }}/api/v2/job_templates/{{ template_id }}/launch/"
        method: POST
        url_username: "{{ ansible_user }}"
        url_password: "{{ ansible_password }}"
      register: launch_results

    - name: Debug the results
      ansible.builtin.debug:
        var: launch_results
